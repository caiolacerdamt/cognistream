{
  "meta": {
    "project": "Audio Transcription Assistant",
    "date": "2026-01-09",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "The Audio Transcription Assistant is a web application that enables users to extract, transcribe, and summarize audio content from YouTube videos or uploaded audio files using advanced AI models such as Google Gemini and OpenAI. It provides real-time progress updates and allows users to manage their API keys and view saved transcriptions and summaries.",
  "core_goals": [
    "Allow users to process YouTube video URLs and uploaded audio files to obtain transcriptions and summaries.",
    "Integrate dual AI engines (Google Gemini and OpenAI) for transcription and summarization with user-selectable provider choice.",
    "Provide real-time progress updates to users through Server-Sent Events (SSE).",
    "Enable secure user authentication and authorization with Supabase.",
    "Offer users the ability to save, view, and manage their transcription history and API keys.",
    "Ensure a clean architecture with frontend, backend, and database layers facilitating scalable and maintainable design."
  ],
  "key_features": [
    "User Authentication and secure route protection via JWT tokens.",
    "Processing of YouTube video URLs by extracting audio for transcription and summarization.",
    "Upload support for local audio files with multipart/form-data handling.",
    "Support for selecting AI provider (Google Gemini or OpenAI) before processing media.",
    "Real-time streaming of processing progress updates using SSE.",
    "Storage of transcription results, summaries, key topics, and usage data in a Supabase database.",
    "Settings API for users to configure and manage API keys for different AI providers.",
    "Dashboard interface to browse previous transcriptions and summaries.",
    "Use of TypeScript, Express.js, Supabase, Multer, and AI SDKs for robust backend implementation."
  ],
  "user_flow_summary": [
    "User registers or logs into the application securely.",
    "User chooses between pasting a YouTube video URL or uploading a local audio file.",
    "User selects preferred AI provider (Google Gemini or OpenAI) for transcription and summarization.",
    "The system processes the input: extracting audio, transcribing, summarizing, and extracting key topics.",
    "Processing progress is streamed live to the user interface via SSE to show stages such as Downloading, Transcribing, and Saving.",
    "Final transcription, summary, and extracted topics are displayed to the user.",
    "User can browse and view their history of saved transcriptions and summaries.",
    "Users can update their API keys securely via the settings interface."
  ],
  "validation_criteria": [
    "User authentication flow enforces secure registration and login with protected routes.",
    "YouTube URL input is validated and correctly triggers audio extraction.",
    "Audio file uploads are correctly handled and processed with supported file types.",
    "AI provider selection affects processing with calls to the correct AI service (Gemini or OpenAI).",
    "Processing updates stream correctly in real-time to the client via SSE.",
    "Transcriptions, summaries, and metadata are accurately saved and retrievable from the database.",
    "API keys for AI providers can be securely saved, retrieved, and updated via the Settings API.",
    "Temporary audio files are properly cleaned up after processing to prevent resource leaks.",
    "UI displays final transcription, summary, and key topics accurately following processing completion."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "Express.js",
      "Supabase",
      "OpenAI",
      "Google Generative AI (Gemini)",
      "Multer"
    ],
    "features": [
      {
        "name": "Settings API",
        "description": "API to manage API keys for different providers (OpenAI, Gemini)",
        "files": [
          "src/index.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Settings API",
            "version": "1.0.0"
          },
          "paths": {
            "/api/settings/keys/{provider}": {
              "get": {
                "summary": "Check if API key is configured",
                "parameters": [
                  {
                    "name": "provider",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Configuration status",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "configured": {
                              "type": "boolean"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "/api/settings/keys": {
              "post": {
                "summary": "Save API key",
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "provider": {
                            "type": "string"
                          },
                          "key": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Success"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Process Video Stream",
        "description": "Process a YouTube video URL with real-time SSE updates",
        "files": [
          "src/index.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/process-video/stream": {
              "post": {
                "summary": "Process video with streaming events",
                "description": "Extracts audio, transcribes, and summarizes via SSE",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "url": {
                            "type": "string"
                          },
                          "provider": {
                            "type": "string"
                          },
                          "apiKey": {
                            "type": "string"
                          },
                          "userId": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Stream of events (text/event-stream)"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Process Video",
        "description": "Process a YouTube video URL (Standard JSON response)",
        "files": [
          "src/index.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/process-video": {
              "post": {
                "summary": "Process video",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "url": {
                            "type": "string"
                          },
                          "provider": {
                            "type": "string"
                          },
                          "apiKey": {
                            "type": "string"
                          },
                          "userId": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Processing result"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Process File",
        "description": "Upload and process a local audio file",
        "files": [
          "src/index.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/process-file": {
              "post": {
                "summary": "Process uploaded file",
                "requestBody": {
                  "content": {
                    "multipart/form-data": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "audio": {
                            "type": "string",
                            "format": "binary"
                          },
                          "provider": {
                            "type": "string"
                          },
                          "apiKey": {
                            "type": "string"
                          },
                          "userId": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Processing result"
                  }
                }
              }
            }
          }
        }
      }
    ]
  }
}
